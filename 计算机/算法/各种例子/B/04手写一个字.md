```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas id='c1' style="border:1px solid #ccc;"></canvas>
    <script>
        let canvasWidth = Math.min(800, document.documentElement.clientWidth - 20)
        let canvasHeight = canvasWidth

        let strokeColor = "black"
        let isMouseDown = false;
        let lastTimestamp = 0;
        let lastLineWidth = -1

        let canvas = document.querySelector('#c1')
        let context = canvas.getContext("2d")

        canvas.width = canvasWidth;
        canvas.height = canvasHeight;

        function beginStroke(point) {
            isMouseDown = true;
            lastLoc = windowToCanvas(point.x, point.y)
            lastTimestamp = new Date().getTime();
        }
        function endStroke() {
            isMouseDown = false
        }
        function moveStroke(point) {

            var curLoc = windowToCanvas(point.x, point.y);
            var curTimestamp = new Date().getTime();
            var s = calcDistance(curLoc, lastLoc)
            var t = curTimestamp - lastTimestamp

            var lineWidth = calcLineWidth(t, s);

            //draw
            context.beginPath();
            context.moveTo(lastLoc.x, lastLoc.y);
            context.lineTo(curLoc.x, curLoc.y);

            context.strokeStyle = strokeColor
            context.lineWidth = lineWidth
            context.lineCap = "round"
            context.lineJoin = "round"
            context.stroke()

            lastLoc = curLoc
            lastTimestamp = curTimestamp
            lastLineWidth = lineWidth
        }

        canvas.onmousedown = function (e) {
            e.preventDefault();
            beginStroke({ x: e.clientX, y: e.clientY })
        }
        canvas.onmouseup = function (e) {
            e.preventDefault();
            endStroke()
        }
        canvas.onmouseout = function (e) {
            e.preventDefault()
            endStroke()
        };
        canvas.onmousemove = function (e) {
            e.preventDefault()
            if (isMouseDown) {
                moveStroke({ x: e.clientX, y: e.clientY })
            }
        }

        let maxLineWidth = 30
        let minLineWidth = 1
        let maxStrokeV = 10
        let minStrokeV = 0.1
        function calcLineWidth(t, s) {

            var v = s / t;

            var resultLineWidth;
            if (v <= minStrokeV)
                resultLineWidth = maxLineWidth;
            else if (v >= maxStrokeV)
                resultLineWidth = minLineWidth;
            else {
                resultLineWidth = maxLineWidth - (v - minStrokeV) / (maxStrokeV - minStrokeV) * (maxLineWidth - minLineWidth);
            }

            if (lastLineWidth == -1)
                return resultLineWidth;

            return resultLineWidth * 1 / 3 + lastLineWidth * 2 / 3;
        }
        function calcDistance(loc1, loc2) {
            return Math.sqrt((loc1.x - loc2.x) * (loc1.x - loc2.x) + (loc1.y - loc2.y) * (loc1.y - loc2.y))
        }
        function windowToCanvas(x, y) {
            let bbox = canvas.getBoundingClientRect()
            return { x: x - bbox.left, y: y - bbox.top }
        }
    </script>
</body>

</html>
```